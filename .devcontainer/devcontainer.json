{
    "name": "Ladybird",
    "image": "mcr.microsoft.com/devcontainers/base:noble",
    // Features to add to the dev container. More info: https://containers.dev/implementors/features.
    "features": {
        "ghcr.io/devcontainers/features/github-cli:1": {},
        "ghcr.io/devcontainers-contrib/features/pre-commit:2": {},
        "./features/ladybird": {
            "llvm_version": 18,
        }
    },
    // Use 'postCreateCommand' to run commands after the container is created.
    "postCreateCommand": "pre-commit install; pre-commit install --hook-type commit-msg",
    // Configure tool-specific properties.
    "customizations": {
        "vscode": {
            "extensions": [
                "ms-vscode.cmake-tools",
                "llvm-vs-code-extensions.vscode-clangd",
                "eamodio.gitlens"
            ],
            "settings": {
                // Excluding the generated directories keeps your file view clean and speeds up search.
                "files.exclude": {
                    "**/.git": true,
                    "Toolchain/Local/**": true,
                    "Toolchain/Tarballs/**": true,
                    "Toolchain/Build/**": true,
                    "Build/**": true,
                },
                "search.exclude": {
                    "**/.git": true,
                    "Toolchain/Local/**": true,
                    "Toolchain/Tarballs/**": true,
                    "Toolchain/Build/**": true,
                    "Build/**": true,
                },
                // Force clang-format to respect Ladybird's .clang-format style file. This is not necessary if you're not using the Microsoft C++ extension.
                "C_Cpp.clang_format_style": "file",
                // Tab settings
                "editor.tabSize": 4,
                "editor.useTabStops": false,
                // format trailing new lines
                "files.trimFinalNewlines": true,
                "files.insertFinalNewline": true,
                // git commit message length
                "git.inputValidationLength": 72,
                "git.inputValidationSubjectLength": 72,
                // If clangd was obtained from a package manager, its path can be set here.
                // Note: This has to be adjusted manually, to the "llvm_version" from above
                "clangd.path": "clangd-18",
                "clangd.arguments": [
                    "--header-insertion=never" // See https://github.com/clangd/clangd/issues/1247
                ]
            }
        }
    },
    // set docker specific run arguments
    "runArgs": [
        "--net=host"
    ],
    // set environment variables, that are goinf to to be passed to the container
    "containerEnv": {
        "DISPLAY": "${localEnv:DISPLAY}",
        "XAUTHORITY": "${localEnv:XAUTHORITY}",
        "QT_QPA_PLATFORM": "xcb"
    },
    "mounts": [
        {
            "source": "/tmp/.X11-unix",
            "target": "/tmp/.X11-unix:rw",
            "type": "bind"
        }
    ]

    // Uncomment to connect as root instead. More info: https://aka.ms/dev-containers-non-root.
    // "remoteUser": "root",
}
